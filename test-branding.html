<!DOCTYPE html>
<html>
<head>
  <title>Branding Test</title>
  <style>
    body { font-family: monospace; padding: 20px; }
    pre { background: #f5f5f5; padding: 10px; }
    .result { margin: 20px 0; padding: 10px; border: 1px solid #ccc; }
  </style>
</head>
<body>
  <h1>Branding Collection Test</h1>
  <button onclick="testBranding()">Test Branding</button>
  <div id="output"></div>

  <script src="config/firebase-config.js"></script>
  <script type="module">
    import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
    import { getFirestore, collection, getDocs, doc, getDoc } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';

    const app = initializeApp(window.__FIREBASE_CONFIG);
    const db = getFirestore(app);

    window.testBranding = async function() {
      const output = document.getElementById('output');
      output.innerHTML = '<h2>Loading...</h2>';

      let html = '';

      try {
        // 1. Companies koleksiyonu
        html += '<div class="result"><h3>1. COMPANIES COLLECTION</h3>';
        const companiesSnap = await getDocs(collection(db, 'companies'));
        html += '<pre>';
        companiesSnap.forEach(doc => {
          html += `ID: ${doc.id}\n`;
          html += `Name: ${doc.data().name}\n`;
          html += '---\n';
        });
        html += '</pre></div>';

        // 2. Branding koleksiyonu
        html += '<div class="result"><h3>2. BRANDING COLLECTION</h3>';
        const brandingSnap = await getDocs(collection(db, 'branding'));
        html += '<pre>';
        brandingSnap.forEach(doc => {
          const data = doc.data();
          html += `Document ID: ${doc.id}\n`;
          html += `company field: ${data.company || 'N/A'}\n`;
          html += `companyId field: ${data.companyId || 'N/A'}\n`;
          html += `Has Logo: ${data.logoUrl ? 'YES' : 'NO'}\n`;
          html += `Has Placeholder: ${data.searchPlaceholderWords ? 'YES' : 'NO'}\n`;
          html += '---\n';
        });
        html += '</pre></div>';

        // 3. Test BLUEMINT yükleme
        html += '<div class="result"><h3>3. TEST LOADING BLUEMINT</h3>';
        html += '<pre>';

        // Try with "BLUEMINT"
        html += 'Trying: doc(db, "branding", "BLUEMINT")\n';
        let doc1 = await getDoc(doc(db, 'branding', 'BLUEMINT'));
        html += `Result: ${doc1.exists() ? '✅ EXISTS' : '❌ NOT FOUND'}\n`;
        if (doc1.exists()) {
          html += `Data: ${JSON.stringify(doc1.data(), null, 2)}\n`;
        }
        html += '\n';

        // Try with company ID
        html += 'Trying: doc(db, "branding", "xJamxO1gSkMAxio5NoR1")\n';
        let doc2 = await getDoc(doc(db, 'branding', 'xJamxO1gSkMAxio5NoR1'));
        html += `Result: ${doc2.exists() ? '✅ EXISTS' : '❌ NOT FOUND'}\n';
        if (doc2.exists()) {
          html += `Data: ${JSON.stringify(doc2.data(), null, 2)}\n`;
        }

        html += '</pre></div>';

        output.innerHTML = html;

      } catch (error) {
        output.innerHTML = '<div class="result"><h3>ERROR</h3><pre>' + error.message + '\n' + error.stack + '</pre></div>';
      }
    };
  </script>
</body>
</html>
