<!DOCTYPE html>
<html>
<head>
  <title>Branding Test</title>
  <style>
    body { font-family: monospace; padding: 20px; }
    pre { background: #f5f5f5; padding: 10px; white-space: pre-wrap; }
    .result { margin: 20px 0; padding: 10px; border: 1px solid #ccc; }
  </style>
</head>
<body>
  <h1>Branding Collection Test</h1>
  <button onclick="testBranding()">Test Branding</button>
  <div id="output"></div>

  <script src="config/firebase-config.js"></script>
  <script type="module">
    import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
    import { getFirestore, collection, getDocs, doc, getDoc } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';

    const app = initializeApp(window.__FIREBASE_CONFIG);
    const db = getFirestore(app);

    window.testBranding = async function() {
      const output = document.getElementById('output');
      output.innerHTML = '<h2>Loading...</h2>';

      let results = [];

      try {
        // 1. Companies koleksiyonu
        results.push('<div class="result"><h3>1. COMPANIES COLLECTION</h3><pre>');
        const companiesSnap = await getDocs(collection(db, 'companies'));
        companiesSnap.forEach(docSnap => {
          results.push('ID: ' + docSnap.id);
          results.push('Name: ' + docSnap.data().name);
          results.push('---');
        });
        results.push('</pre></div>');

        // 2. Branding koleksiyonu
        results.push('<div class="result"><h3>2. BRANDING COLLECTION</h3><pre>');
        const brandingSnap = await getDocs(collection(db, 'branding'));
        brandingSnap.forEach(docSnap => {
          const data = docSnap.data();
          results.push('Document ID: ' + docSnap.id);
          results.push('company field: ' + (data.company || 'N/A'));
          results.push('companyId field: ' + (data.companyId || 'N/A'));
          results.push('Has Logo: ' + (data.logoUrl ? 'YES' : 'NO'));
          results.push('Has Placeholder: ' + (data.searchPlaceholderWords ? 'YES' : 'NO'));
          results.push('---');
        });
        results.push('</pre></div>');

        // 3. Test BLUEMINT yükleme
        results.push('<div class="result"><h3>3. TEST LOADING BLUEMINT</h3><pre>');

        // Try with "BLUEMINT"
        results.push('Trying: doc(db, "branding", "BLUEMINT")');
        const brandingRef1 = doc(db, 'branding', 'BLUEMINT');
        const brandingDoc1 = await getDoc(brandingRef1);
        results.push('Result: ' + (brandingDoc1.exists() ? '✅ EXISTS' : '❌ NOT FOUND'));
        if (brandingDoc1.exists()) {
          results.push('Data: ' + JSON.stringify(brandingDoc1.data(), null, 2));
        }
        results.push('');

        // Try with company ID
        results.push('Trying: doc(db, "branding", "xJamxO1gSkMAxio5NoR1")');
        const brandingRef2 = doc(db, 'branding', 'xJamxO1gSkMAxio5NoR1');
        const brandingDoc2 = await getDoc(brandingRef2);
        results.push('Result: ' + (brandingDoc2.exists() ? '✅ EXISTS' : '❌ NOT FOUND'));
        if (brandingDoc2.exists()) {
          results.push('Data: ' + JSON.stringify(brandingDoc2.data(), null, 2));
        }

        results.push('</pre></div>');

        output.innerHTML = results.join('\n');

      } catch (error) {
        output.innerHTML = '<div class="result"><h3>ERROR</h3><pre>' + error.message + '\n' + error.stack + '</pre></div>';
      }
    };
  </script>
</body>
</html>
